{% extends 'base.html' %}
{% load static %}

{% block title %}Department Lead Dashboard{% endblock %}

{% block styles %}
<style>
    /* Base Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background-color: #f5f7fb;
        color: #333;
        width: 100%;
        overflow-x: hidden;
    }
    .container {
        display: flex;
        min-height: 100vh;
        width: 100%;
        position: relative;
    }
    
    /* Sidebar Styles */
    .sidebar {
        width: 250px;
        background-color: #1e293b;
        color: #e2e8f0;
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        transition: transform 0.3s ease;
        z-index: 100;
    }
    .sidebar.collapsed {
        width: 0;
        padding: 0;
        overflow: hidden;
        transform: translateX(-100%);
    }
    .app-logo {
        font-size: 24px;
        font-weight: bold;
        padding: 0 20px 20px;
        border-bottom: 1px solid #475569;
        margin-bottom: 20px;
    }
    .app-logo span {
        color: #3b82f6;
    }
    .sidebar-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 15px;
        margin-top: 20px;
    }
    .sidebar-button {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        font-size: 16px;
        color: #e2e8f0;
        text-decoration: none;
        transition: background-color 0.2s;
        margin-bottom: 5px;
        border: none;
        background: none;
        cursor: pointer;
        text-align: left;
        border-radius: 8px;
        width: 100%;
    }
    .sidebar-button:hover {
        background-color: rgba(255, 255, 255, 0.1);
        transform: translateX(3px);
    }
    .active-button {
        background-color: rgba(255, 255, 255, 0.15);
        color: #ffffff;
        font-weight: 500;
    }
    .sidebar-button::before {
        content: "";
        display: inline-block;
        width: 18px;
        height: 18px;
        margin-right: 10px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        opacity: 0.8;
    }
    .sidebar-button:nth-child(1)::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'%3E%3C/path%3E%3C/svg%3E");
    }
    .sidebar-button:nth-child(2)::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z'%3E%3C/path%3E%3C/svg%3E");
    }
    .sidebar-button:nth-child(3)::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'%3E%3C/path%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'%3E%3C/path%3E%3C/svg%3E");
    }
    .logout-button {
        background-color: rgba(239, 68, 68, 0.2);
        color: #fecaca;
        margin-top: auto;
        width: calc(100% - 30px);
        margin-left: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
        padding: 12px 15px;
        transition: all 0.2s ease;
    }
    .logout-button:hover {
        background-color: rgba(239, 68, 68, 0.3);
    }
    .logout-button::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23fecaca'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1'%3E%3C/path%3E%3C/svg%3E");
    }
    
    /* Main Content Styles */
    .main-content {
        flex: 1;
        padding: 20px;
        margin-left: 250px;
        width: calc(100% - 250px);
    }
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 1px solid #e2e8f0;
    }
    .header-left {
        display: flex;
        align-items: center;
    }
    .header-left h1 {
        font-size: 24px;
        color: #1e293b;
        display: flex;
        align-items: center;
        margin-left: 15px;
    }
    .menu-icon {
        color: #3b82f6;
        font-size: 24px;
        cursor: pointer;
    }
    .role-badge {
        font-size: 12px;
        background-color: #3b82f6;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        margin-left: 10px;
    }
    .header-right {
        display: flex;
        align-items: center;
    }
    .user-info {
        display: flex;
        align-items: center;
    }
    .user-avatar {
        width: 36px;
        height: 36px;
        background-color: #3b82f6;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        margin-right: 10px;
    }
    
    /* Dashboard Stats Section */
    .stats-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    .stat-card {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        display: flex;
        flex-direction: column;
    }
    .stat-card h3 {
        font-size: 16px;
        color: #6b7280;
        margin-bottom: 10px;
    }
    .stat-value {
        font-size: 28px;
        font-weight: bold;
        color: #1e293b;
    }
    .stat-change {
        font-size: 14px;
        color: #10b981;
        margin-top: 5px;
        display: flex;
        align-items: center;
    }
    .stat-change.negative {
        color: #ef4444;
    }
    
    /* Tabs Section */
    .tabs-container {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
        overflow: hidden;
    }
    .tabs-header {
        display: flex;
        border-bottom: 1px solid #e5e7eb;
    }
    .tab-button {
        padding: 15px 20px;
        background: none;
        border: none;
        font-size: 16px;
        font-weight: 500;
        color: #6b7280;
        cursor: pointer;
        position: relative;
        transition: color 0.2s;
    }
    .tab-button:hover {
        color: #3b82f6;
    }
    .tab-button.active {
        color: #3b82f6;
    }
    .tab-button.active::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background-color: #3b82f6;
    }
    .tab-content {
        display: none;
        padding: 20px;
    }
    .tab-content.active {
        display: block;
    }
    
    /* Team Cards */
    .teams-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .team-card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        padding: 20px;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .team-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    .team-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    .team-name {
        font-size: 18px;
        font-weight: bold;
        color: #1e293b;
    }
    .team-label {
        font-size: 12px;
        background-color: #e0f2fe;
        color: #0284c7;
        padding: 4px 8px;
        border-radius: 4px;
    }
    .team-meta {
        color: #6b7280;
        margin-bottom: 15px;
        font-size: 14px;
        display: flex;
        justify-content: space-between;
    }
    .team-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
    }
    
    /* Health Session Cards */
    .health-sessions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .session-card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        padding: 20px;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .session-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    .session-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    .session-title {
        font-size: 18px;
        font-weight: bold;
        color: #1e293b;
    }
    .session-date {
        color: #6b7280;
        font-size: 14px;
    }
    .session-meta {
        color: #6b7280;
        margin-bottom: 15px;
        font-size: 14px;
    }
    .session-status {
        font-size: 12px;
        padding: 4px 8px;
        border-radius: 4px;
        display: inline-block;
        font-weight: 500;
    }
    .status-active {
        background-color: #dcfce7;
        color: #16a34a;
    }
    .status-completed {
        background-color: #e0f2fe;
        color: #0284c7;
    }
    .status-pending {
        background-color: #ffedd5;
        color: #ea580c;
    }
    
    /* Project Cards */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .project-card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        padding: 20px;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .project-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    .project-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    .project-title {
        font-size: 18px;
        font-weight: bold;
        color: #1e293b;
    }
    .project-status {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
    }
    .project-meta {
        color: #6b7280;
        margin-bottom: 15px;
        font-size: 14px;
    }
    .project-desc {
        color: #4b5563;
        font-size: 14px;
        margin-bottom: 15px;
        line-height: 1.5;
    }
    
    /* Request List Section */
    .request-list {
        margin-top: 20px;
    }
    .request-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #e5e7eb;
    }
    .request-item:last-child {
        border-bottom: none;
    }
    .request-info {
        flex: 1;
    }
    .request-user {
        font-weight: 500;
        color: #1e293b;
    }
    .request-team {
        font-size: 14px;
        color: #6b7280;
    }
    .request-actions {
        display: flex;
        gap: 10px;
    }
    
    /* Button Styles */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.2s;
    }
    .btn-primary {
        background-color: #3b82f6;
        color: white;
        border: none;
    }
    .btn-primary:hover {
        background-color: #2563eb;
    }
    .btn-secondary {
        background-color: #f3f4f6;
        color: #4b5563;
        border: 1px solid #e5e7eb;
    }
    .btn-secondary:hover {
        background-color: #e5e7eb;
    }
    .btn-approve {
        background-color: #dcfce7;
        color: #16a34a;
        border: 1px solid #86efac;
    }
    .btn-approve:hover {
        background-color: #bbf7d0;
    }
    .btn-reject {
        background-color: #fee2e2;
        color: #ef4444;
        border: 1px solid #fca5a5;
    }
    .btn-reject:hover {
        background-color: #fecaca;
    }
    .btn-sm {
        padding: 5px 10px;
        font-size: 12px;
    }
    .btn-icon {
        margin-right: 6px;
    }
    
    /* No Content Messaging */
    .no-content {
        text-align: center;
        padding: 30px;
        color: #6b7280;
        font-style: italic;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            z-index: 100;
        }
        .sidebar.active {
            transform: translateX(0);
        }
        .main-content {
            margin-left: 0;
            width: 100%;
            padding: 15px;
        }
        .stats-container {
            grid-template-columns: 1fr;
        }
        .teams-grid, .health-sessions-grid, .projects-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="app-logo">
            Health<span>Check</span>
        </div>
        <div class="sidebar-buttons">
            <a href="{% url 'department_lead_dashboard' %}" style="text-decoration: none; width: 100%;">
                <button class="sidebar-button active-button">Dashboard</button>
            </a>
            <a href="{% url 'project_health' %}" style="text-decoration: none; width: 100%;">
                <button class="sidebar-button">Health Checks</button>
            </a>
            <a href="{% url 'settings' %}" style="text-decoration: none; width: 100%;">
                <button class="sidebar-button">Settings</button>
            </a>
        </div>
        <a href="{% url 'logout' %}" style="text-decoration: none; margin-top: auto; display: block;" id="logout-link">
            <button class="sidebar-button logout-button">Log Out</button>
        </a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <span class="menu-icon" id="toggle-sidebar">≡</span>
                <h1>Department Dashboard <span class="role-badge">Department Lead</span></h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        {{ user.username|first|upper }}
                    </div>
                    <span>{{ user.username }}</span>
                </div>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="stats-container">
            <div class="stat-card">
                <h3>Department Teams</h3>
                <div class="stat-value">{{ department_teams.count }}</div>
                <div class="stat-change">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                    </svg>
                    2 new this month
                </div>
            </div>
            <div class="stat-card">
                <h3>Team Members</h3>
                <div class="stat-value">{{ department_members }}</div>
                <div class="stat-change">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                    </svg>
                    5 new this month
                </div>
            </div>
            <div class="stat-card">
                <h3>Active Projects</h3>
                <div class="stat-value">{{ active_projects.count }}</div>
                <div class="stat-change">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                    </svg>
                    3 new this month
                </div>
            </div>
            <div class="stat-card">
                <h3>Health Check Sessions</h3>
                <div class="stat-value">{{ health_sessions.count }}</div>
                <div class="stat-change negative">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                    2 less than last month
                </div>
            </div>
        </div>

        <!-- Tabs Container -->
        <div class="tabs-container">
            <div class="tabs-header">
                <button class="tab-button active" data-tab="department-teams">Department Teams</button>
                <button class="tab-button" data-tab="health-sessions">Health Check Sessions</button>
                <button class="tab-button" data-tab="projects">Department Projects</button>
                <button class="tab-button" data-tab="join-requests">Join Requests</button>
            </div>

            <!-- Department Teams Tab -->
            <div class="tab-content active" id="department-teams">
                <div class="teams-grid">
                    {% if department_teams %}
                        {% for team in department_teams %}
                        <div class="team-card">
                            <div class="team-header">
                                <h3 class="team-name">{{ team.name }}</h3>
                                <span class="team-label">{{ team.department.name }}</span>
                            </div>
                            <div class="team-meta">
                                <span>{{ team.team_members.count }} Members</span>
                                <span>{{ team.projects.count }} Projects</span>
                            </div>
                            <p>{{ team.description|truncatechars:150 }}</p>
                            <div class="team-actions">
                                <a href="{% url 'team_health_summary' team_id=team.id %}" class="btn btn-primary">Health Summary</a>
                                <button class="btn btn-secondary view-members-btn" data-team-id="{{ team.id }}">View Members</button>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-content">
                            <p>No teams found in your department.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Health Check Sessions Tab -->
            <div class="tab-content" id="health-sessions">
                <div class="health-sessions-grid">
                    {% if health_sessions %}
                        {% for session in health_sessions %}
                        <div class="session-card">
                            <div class="session-header">
                                <h3 class="session-title">{{ session.name }}</h3>
                                <span class="session-date">{{ session.created_at|date:"M d, Y" }}</span>
                            </div>
                            <div class="session-meta">Team: {{ session.team.name }}</div>
                            {% if session.is_active %}
                                <span class="session-status status-active">Active</span>
                            {% else %}
                                <span class="session-status status-completed">Completed</span>
                            {% endif %}
                            <div class="team-actions">
                                <a href="{% url 'view_health_session' session_id=session.id %}" class="btn btn-primary">View Session</a>
                                {% if session.is_active %}
                                <a href="{% url 'close_health_session' session_id=session.id %}" class="btn btn-secondary">Close Session</a>
                                {% else %}
                                <a href="{% url 'team_health_summary' team_id=session.team.id %}" class="btn btn-secondary">Team Summary</a>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-content">
                            <p>No health check sessions found for teams in your department.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Projects Tab -->
            <div class="tab-content" id="projects">
                <div class="projects-grid">
                    {% if department_projects %}
                        {% for project in department_projects %}
                        <div class="project-card">
                            <div class="project-header">
                                <h3 class="project-title">{{ project.title }}</h3>
                                {% if project.status == 'active' %}
                                <div class="project-status status-active">Active</div>
                                {% elif project.status == 'completed' %}
                                <div class="project-status status-completed">Completed</div>
                                {% else %}
                                <div class="project-status status-pending">Pending</div>
                                {% endif %}
                            </div>
                            <div class="project-meta">
                                Team: {{ project.team.name }} | Created: {{ project.created_at|date:"M d, Y" }}
                            </div>
                            <p class="project-desc">{{ project.description|truncatechars:150 }}</p>
                            <div class="team-actions">
                                <a href="#" class="btn btn-primary view-project-btn" data-project-id="{{ project.id }}">View Details</a>
                                {% if project.status == 'pending' %}
                                <a href="{% url 'approve_project' project_id=project.id %}" class="btn btn-approve">Approve</a>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-content">
                            <p>No projects found for teams in your department.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Join Requests Tab -->
            <div class="tab-content" id="join-requests">
                {% if team_join_requests %}
                    <div class="request-list">
                        {% for request in team_join_requests %}
                        <div class="request-item">
                            <div class="request-info">
                                <div class="request-user">{{ request.user.username }}</div>
                                <div class="request-team">Requesting to join: {{ request.team.name }}</div>
                            </div>
                            <div class="request-actions">
                                <form method="POST" action="{% url 'approve_team_request' %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="request_id" value="{{ request.id }}">
                                    <button type="submit" class="btn btn-approve btn-sm">
                                        <span class="btn-icon">✓</span> Approve
                                    </button>
                                </form>
                                <form method="POST" action="{% url 'reject_team_request' %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="request_id" value="{{ request.id }}">
                                    <button type="submit" class="btn btn-reject btn-sm">
                                        <span class="btn-icon">✕</span> Reject
                                    </button>
                                </form>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-content">
                        <p>No pending join requests for teams in your department.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Sidebar toggle
        const toggleButton = document.getElementById('toggle-sidebar');
        const sidebar = document.getElementById('sidebar');
        
        toggleButton.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            sidebar.classList.toggle('active');
        });
        
        // Logout confirmation
        const logoutLink = document.getElementById('logout-link');
        logoutLink.addEventListener('click', function(event) {
            event.preventDefault();
            if (confirm('Are you sure you want to log out?')) {
                window.location.href = this.getAttribute('href');
            }
        });
        
        // Tab switching functionality
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons and contents
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Show corresponding content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // View Members modal functionality would go here
        const viewMembersButtons = document.querySelectorAll('.view-members-btn');
        viewMembersButtons.forEach(button => {
            button.addEventListener('click', function() {
                const teamId = this.getAttribute('data-team-id');
                alert(`Viewing members for team ID: ${teamId}`);
                // In a real implementation, this would open a modal with team members
            });
        });
        
        // View Project Details modal functionality would go here
        const viewProjectButtons = document.querySelectorAll('.view-project-btn');
        viewProjectButtons.forEach(button => {
            button.addEventListener('click', function() {
                const projectId = this.getAttribute('data-project-id');
                alert(`Viewing details for project ID: ${projectId}`);
                // In a real implementation, this would open a modal with project details
            });
        });
    });
</script>
{% endblock %} 